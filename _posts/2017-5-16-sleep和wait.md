---
layout:     post
title:      "sleep和wait"
subtitle:   "sleep和wait"
date:       2017-05-16 09:25:00
author:     "LQ"
header-img: "img/in-post/sleepAndWait.jpg"
header-mask: 0.3
catalog:    false
tags:
    - java
---


##### 1. sleep()
sleep()是使线程停止一段时间的方法。在sleep时间间隔期满后，线程不一定立即恢复执行，这是因为在那个时刻，其他线程可能正在进行，而且没有被调度为放弃执行，除非“醒来”的线程因为其他原因而被阻塞。
##### 2. wait()
当线程交互时，如果线程对一个同步对象x发出一个wait调用时，该线程会暂时执行，被调对象进入等待状态，直到被唤醒活等待时间到。

##### 3.Java中的sleep和wait方法

对于sleep()方法，我们首先要知道该方法是属于Thread类中的。而wait()方法，则是属于Object类中的。

sleep()方法导致了程序暂停执行指定的时间，让出cpu该其他线程，但是他的监控状态依然保持着，当指定的时间到了又会自动恢复运行状态。在调用sleep()方法的过程中，线程不会释放对象锁，而当调用wait()方法的时候，线程会放弃对象锁，进入等待此对象的等待锁定池，只有针对此对象调用notify()方法后本线程才进入对象锁定池准备。

还有用法的上的不同是sleep(milliseconds)可以用时间指定来使他自动醒过来,如果时间不到你只能调用interreput()来强行打断;wait()可以用notify()直接唤起。

wait，notify和notifyAll只能在同步控制方法或者同步控制块里面使用，而sleep可以在任何地方使用。
```
synchronized(x){
      x.notify()
     //或者wait()
   }
```


sleep必须捕获异常，而wait，notify和notifyAll不需要捕获异常

##### 4. 施加者(转)
这两者的施加者是有本质区别的. 
sleep()是让某个线程暂停运行一段时间,其控制范围是由当前线程决定,也就是说,在线程里面决定.好比如说,我要做的事情是 "点火->烧水->煮面",而当我点完火之后我不立即烧水,我要休息一段时间再烧.对于运行的主动权是由我的流程来控制.
而wait(),首先,这是由某个确定的对象来调用的,将这个对象理解成一个传话的人,当这个人在某个线程里面说"暂停!",也是 thisOBJ.wait(),这里的暂停是阻塞,还是"点火->烧水->煮饭",thisOBJ就好比一个监督我的人站在我旁边,本来该线 程应该执行1后执行2,再执行3,而在2处被那个对象喊暂停,那么我就会一直等在这里而不执行3,但正个流程并没有结束,我一直想去煮饭,但还没被允许, 直到那个对象在某个地方说"通知暂停的线程启动!",也就是thisOBJ.notify()的时候,那么我就可以煮饭了,这个被暂停的线程就会从暂停处 继续执行.其实两者都可以让线程暂停一段时间,但是本质的区别是一个线程的运行状态控制,一个是线程之间的通讯的问题。